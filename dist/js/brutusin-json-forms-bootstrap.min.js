if("undefined"==typeof brutusin||"undefined"==typeof brutusin["json-forms"])throw new Error("brutusin-json-forms-bootstrap.js requires brutusin-json-forms.js");"undefined"==typeof markdown&&window.console&&console.warn("Include markdown.js (https://github.com/evilstreak/markdown-js) to add markdown support in property description popups"),"undefined"!=typeof $&&"undefined"!=typeof $.fn&&"undefined"!=typeof $.fn.selectpicker||!window.console||console.warn("Include bootstrap-select.js (https://github.com/silviomoreto/bootstrap-select) to turn native selects into bootstrap components"),function(){var e=brutusin["json-forms"];e.iconHelpClass="zmdi zmdi-help",e.iconRemoveClass="zmdi zmdi-delete",e.iconRefreshClass="zmdi zmdi-refresh",e.addDecorator(function(t,o){if(t.tagName){var a=t.tagName.toLowerCase();if("input"===a&&"checkbox"!==t.type||"textarea"===a)t.className+=" form-control";else if("select"===a)t.className+=" chosen-select form-control";else if("button"===a){if("remove"===t.className)for(t.className+=" "+e.iconRemoveClass;t.firstChild;)t.removeChild(t.firstChild);t.className+=" btn btn-primary  btn-xs"}else"form"===a&&(t.className+=" form-inline")}}),e.addDecorator(function(t,o){if(t.tagName){var a=t.tagName.toLowerCase();if(("label"===a||"button"===a)&&t.title){var n=document.createElement("a");n.setAttribute("style","outline: 0; text-decoration: none; margin-left: 2px;"),n.setAttribute("tabIndex",-1),n.className=e.iconHelpClass,n.setAttribute("data-toggle","popover"),n.setAttribute("data-trigger","focus"),"undefined"==typeof markdown?n.setAttribute("data-content",t.title):n.setAttribute("data-content",markdown.toHTML(t.title)),o.title?n.title=o.title:n.title="Help",$(n).popover({placement:"top",container:"body",html:!("undefined"==typeof markdown)}),t.parentNode.appendChild(n)}}}),e.addDecorator(function(e,t){if(e.tagName){var o=e.tagName.toLowerCase();"undefined"!=typeof $&&"undefined"!=typeof $.fn&&"undefined"!=typeof $.fn.selectpicker&&"select"===o&&(e.title="",e.className+=" selectpicker",e.setAttribute("data-live-search",!0),$(e).selectpicker())}}),e.bootstrap=new Object,e.bootstrap.addFormatDecorator=function(t,o,a,n){e.addDecorator(function(e,i){if(e.tagName){var r=e.tagName.toLowerCase();if("input"===r&&"string"===i.type&&i.format===t&&(o&&(e.type=o),a)){var d=e.parentNode,s=document.createElement("table");s.setAttribute("style","border:none;margin:0");var l=document.createElement("tr"),c=document.createElement("td");c.setAttribute("style","width:100%; padding:0;padding-right:4px"),s.appendChild(l),l.appendChild(c),d.removeChild(e),c.appendChild(e),d.appendChild(s);var p=document.createElement("td");l.appendChild(p),p.setAttribute("style","padding:0");var m=document.createElement("button");m.className="btn btn-default "+a,m.onclick=function(){n(e)},p.appendChild(m)}}})},e.bootstrap.showLoading=function(t){if(t&&t.parentNode){var o=t.id+"_loading",a=t.id+"_loading-layer",n=document.getElementById(o),i=document.getElementById(a);if(!n){var r=t.tagName.toLowerCase();t.parentNode.style.position="relative",n=document.createElement("span"),n.id=o,n.className=e.iconRefreshClass+" icon-refresh-animate","select"===r?n.className+=" loading-icon-select":"checkbox"===t.type?n.className+=" loading-icon-checkbox":n.className+=" loading-icon",t.parentNode.appendChild(n),i=document.createElement("div"),i.className="loading-layer",i.appendChild(document.createTextNode("")),i.id=a,t.parentNode.appendChild(i)}n.style.visibility="visible",i.style.visibility="visible"}},e.bootstrap.hideLoading=function(e){if(e){var t=e.id+"_loading",o=e.id+"_loading-layer",a=document.getElementById(t),n=document.getElementById(o);a&&(a.style.visibility="hidden"),n&&(n.style.visibility="hidden")}},e.onResolutionStarted=e.bootstrap.showLoading,e.onResolutionFinished=e.bootstrap.hideLoading,e.onValidationSuccess=function(e){e.className=e.className.replace(" is-invalid","")},e.onValidationError=function(t,o){setTimeout(function(){var a=t.getAttribute("data-toggle"),n=t.getAttribute("data-trigger"),i=t.getAttribute("data-content"),r=t.title;t.setAttribute("data-toggle","popover"),t.setAttribute("data-trigger","manual"),"undefined"==typeof markdown?t.setAttribute("data-content",o):t.setAttribute("data-content",markdown.toHTML(o)),t.title=e.messages.validationError,t.className.includes("is-invalid")||(t.className+=" is-invalid"),t.focus(),$(t).popover({placement:"top",container:"body",html:!0}),$(t).popover("show");var d=t.onblur;t.onblur=function(e){a?($(t).popover("hide"),t.setAttribute("data-toggle",a),t.setAttribute("data-trigger",n),t.setAttribute("data-content",i)):($(t).popover("dispose"),t.removeAttribute("data-toggle"),t.removeAttribute("data-trigger"),t.removeAttribute("data-content")),t.onblur=d,t.title=r,d&&d()}},200)}}();